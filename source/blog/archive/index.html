---
layout: default
title: Archives
permalink: /blog/archive/
---

{% if site.blog and site.blog.size > 0 %}
  {% assign blog_with_dates = site.blog | where_exp: "item", "item.date" | sort: 'date' | reverse %}
{% else %}
  {% assign blog_with_dates = "" | split: "" %}
{% endif %}

{% assign archive_list = "" | split: "" %}
{% for post in blog_with_dates %}
  {% assign year_month = post.date | date: "%Y-%m" %}
  {% unless archive_list contains year_month %}
    {% assign archive_list = archive_list | push: year_month %}
  {% endunless %}
{% endfor %}

<div class="blog-container">
  <div class="blog-main">
    <h1>Archives</h1>
    <p class="archive-meta">{{ archive_list.size }} months</p>

    <ul class="category-list">
      {% for year_month in archive_list %}
        {% assign parts = year_month | split: "-" %}
        {% assign year = parts[0] %}
        {% assign month = parts[1] %}
        {% assign month_names = "January,February,March,April,May,June,July,August,September,October,November,December" | split: "," %}
        {% assign month_index = month | minus: 1 %}
        {% assign month_name = month_names[month_index] %}

        {% assign archive_count = 0 %}
        {% for post in blog_with_dates %}
          {% assign post_year_month = post.date | date: "%Y-%m" %}
          {% if post_year_month == year_month %}
            {% assign archive_count = archive_count | plus: 1 %}
          {% endif %}
        {% endfor %}

        <li>
          <a href="{{ '/blog/archive/' | append: year | append: '/' | append: month | append: '/' | relative_url }}">
            {{ month_name }} {{ year }}
            <span class="category-count">({{ archive_count }})</span>
          </a>
        </li>
      {% endfor %}
    </ul>

    {% if archive_list.size == 0 %}
      <p class="no-content">No blog posts have been published yet.</p>
    {% endif %}
  </div>

  <aside class="blog-sidebar">
    <div class="sidebar-section">
      <h3>Recent Posts</h3>
      <ul class="recent-posts-list">
        {% for post in blog_with_dates limit:5 %}
          <li>
            <a href="{{ post.url | relative_url }}">
              {% if post.lowercase_title %}{{ post.lowercase_title }}{% else %}{{ post.title }}{% endif %}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>

    <div class="sidebar-section">
      <h3>Categories</h3>
      {% assign all_categories = site.blog | map: "categories" | join: "," | split: "," | uniq | sort %}
      <ul class="category-list">
        <li><a href="{{ '/blog/' | relative_url }}">All Posts</a></li>
        {% for category in all_categories %}
          {% if category != "" %}
            {% assign cat_slug = category | strip | slugify %}
            {% assign cat_count = site.blog | where_exp: "item", "item.categories contains category" | size %}
            <li>
              <a href="{{ '/blog/category/' | append: cat_slug | append: '/' | relative_url }}">
                {{ category | strip }}
                <span class="category-count">({{ cat_count }})</span>
              </a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  </aside>
</div>


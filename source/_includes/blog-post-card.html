{%- comment -%}
  Reusable blog listing card.

  Usage:
    {% include blog-post-card.html post=post %}
{%- endcomment -%}

{%- assign post = include.post -%}

<article class="blog-post-card {% unless post.img %}no-image{% endunless %}">
  {% if post.img %}
    <div class="blog-post-thumbnail">
      <a href="{{ post.url | relative_url }}">
        <img src="{{ post.img | relative_url }}" alt="{{ post.title }}" />
      </a>
    </div>
  {% endif %}

  <div class="blog-post-info">
    <h3>
      <a href="{{ post.url | relative_url }}">
        {% if post.lowercase_title %}{{ post.lowercase_title }}{% else %}{{ post.title }}{% endif %}
      </a>
    </h3>

    <div class="blog-post-meta">
      {% if post.date %}
        <span class="release-date">
          {{ post.date | date: "%B %d, %Y" }}
          {% if post.author %}
            by {% include auto_link.html content=post.author %}
          {% endif %}
        </span>
      {% endif %}
    </div>

    {% if post.description %}
      <p class="blog-post-description">
        {% include auto_link.html content=post.description %}
      </p>
    {% else %}
      <p class="blog-post-excerpt">
        {% assign excerpt = post.content | strip_html | truncatewords: 40 %}
        {% include auto_link.html content=excerpt %}
      </p>
    {% endif %}
  </div>
</article>

